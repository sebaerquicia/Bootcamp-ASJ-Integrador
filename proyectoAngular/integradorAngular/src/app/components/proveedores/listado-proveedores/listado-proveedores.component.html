<div class="container-fluid px-4">
  <h1 class="mt-4">Listado de Proveedores</h1>
  <ol class="breadcrumb mb-4">
    <li class="breadcrumb-item"><a href="">Inicio</a></li>
    <li class="breadcrumb-item active">Listado Proveedores</li>
  </ol>
  <div class="row">
    <div class="col-3 pt-2">
      <label for="">Filtrar por Activos/Eliminados </label>
      <select
        class="form-select"
        aria-label="Rubro"
        [(ngModel)]="filtroActivoEliminado"
        name="categoriaProv"
      >
        <option value="Todos">Todos</option>
        <option value="Activos">Activos</option>
        <option value="Eliminados">Eliminados</option>
      </select>
    </div>
    <div class="col-4 pt-1 ">
      <label for="">Filtrar por Razon Social: </label>
      <input class="form-control me-2" type="search" placeholder="Ej: 'ProveedorX'" [(ngModel)]="filtroRazonSocial" aria-label="Search">
  </div>
    <div class="row">
      <div class="col">
        <div *ngIf="proveedores.length === 0" class="alert alert-warning">
          No hay proveedores cargados en el sistema. Por favor, agrega
          proveedores.
        </div>
        <table *ngIf="proveedores.length > 0" class="table">
          <thead>
            <tr>
              <th scope="col">Código</th>
              <th scope="col">Nombre Proveedor</th>
              <th scope="col">Sitio WEB</th>
              <th scope="col">Email</th>
              <th scope="col">Teléfono</th>
              <th scope="col">Contacto</th>

              <th scope="col">Baja/Modificación</th>
            </tr>
          </thead>

          <tbody
            id="tableBody"
            class="table__body"
            *ngFor="let proveedor of proveedores| filterBy: filtroRazonSocial; let i = index"
            [ngStyle]="{
              'background-color': !proveedor.eliminado ? 'inherit' : '#ccc'
            }"
          >
            <ng-container
              *ngIf="
                filtroActivoEliminado === 'Todos' ||
                (filtroActivoEliminado === 'Activos' &&
                  proveedor.eliminado === false) ||
                (filtroActivoEliminado === 'Eliminados' &&
                  proveedor.eliminado === true)
              "
            >
              <tr>
                <td>{{ proveedor.codigo_proveedor }}</td>
                <th>{{ proveedor.razon_social | titlecase }}</th>
                <td>{{ proveedor.web }}</td>
                <td>{{ proveedor.contacto.email_contacto }}</td>
                <td>{{ proveedor.contacto.telefono_contacto }}</td>
                <td>
                  {{ proveedor.contacto.nombre_contacto }}
                  {{ proveedor.contacto.apellido_contacto }}
                </td>
                <td>
                  <button
                  (click)="editarProveedor(proveedor.id)"
                  class="btn btn-outline-secondary "
                >
                Editar
                </button>
                <!-- Mostrar el botón de eliminar o dar de alta según si la propiedad "eliminado" es true o false -->
                <button
                  *ngIf="proveedor.eliminado"
                  class="btn btn-outline-primary "
                  (click)="eliminarProveedor(proveedor.id)"
                >
                  Dar de alta<i class="bi bi-upload"></i>
                </button>
                <button
                  *ngIf="!proveedor.eliminado"
                  class="btn btn-outline-danger"
                  (click)="eliminarProveedor(proveedor.id)"
                >
                  Eliminar<i class="bi bi-trash3"></i>
                </button>
                </td>
              </tr>
            </ng-container>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
