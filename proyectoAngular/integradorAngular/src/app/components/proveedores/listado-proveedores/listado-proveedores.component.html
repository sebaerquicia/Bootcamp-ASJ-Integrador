<div class="container px-4  min-vh-100">
  <h1 class="mt-4">Listado de Proveedores</h1>
  <ol class="breadcrumb mb-4">
    <li class="breadcrumb-item"><a href="">Inicio</a></li>
    <li class="breadcrumb-item active">Listado Proveedores</li>
  </ol>
  <div class="row">
    <div class="col-3 pt-2">
      <label for="">Filtrar por Activos/Eliminados </label>
      <select
        class="form-select"
        aria-label="Rubro"
        [(ngModel)]="filtroActivoEliminado"
        name="categoriaProv"
      >
        <option value="Todos">Todos</option>
        <option value="Activos">Activos</option>
        <option value="Eliminados">Eliminados</option>
      </select>
    </div>
    <div class="col-4 pt-1 ">
      <label for="">Filtrar por Razon Social: </label>
      <input class="form-control me-2" type="search" placeholder="Ej: 'ProveedorX'" [(ngModel)]="filtroRazonSocial" aria-label="Search">
  </div>
  
    <div class="row">
      <div class="col">
        <div *ngIf="proveedores.length === 0" class="alert alert-warning">
          No hay proveedores cargados en el sistema. Por favor, agrega
          proveedores.
        </div>
        <table *ngIf="proveedores.length > 0" class="table">
          <thead>
            <tr>
              <th scope="col">Img</th>
              <th scope="col">Código</th>
              <th scope="col">Razón Social</th>
              <th scope="col">+Info</th>
              <th scope="col">Contacto</th>

              <th scope="col">Baja/Modificación</th>
            </tr>
          </thead>

          <tbody
            id="tableBody"
            class="table__body"
            *ngFor="let proveedor of proveedores| filterBy: filtroRazonSocial; let i = index"
            [ngStyle]="{
              'background-color': !proveedor.eliminado ? 'inherit' : '#ccc'
            }"
          >
            <ng-container
              *ngIf="
                filtroActivoEliminado === 'Todos' ||
                (filtroActivoEliminado === 'Activos' &&
                  proveedor.eliminado === false) ||
                (filtroActivoEliminado === 'Eliminados' &&
                  proveedor.eliminado === true)
              "
            >
              <tr>
                <td><img src="{{proveedor.img}}" alt="FotoProveedor" class="imagenes"></td>
                <td>{{ proveedor.codigo_proveedor }}</td>
                <th>{{ proveedor.razon_social | titlecase }}</th>
                <td>
                  <button class="btn " ngbTooltip="{{proveedor.web}} | {{proveedor.contacto.email_contacto}} | {{proveedor.contacto.telefono_contacto}}">
                    <img width="20" height="20" src="https://img.icons8.com/ios/50/info--v1.png" alt="info--v1"/>
                  </button>

                </td>
                <td>
                  {{ proveedor.contacto.nombre_contacto }}
                  {{ proveedor.contacto.apellido_contacto }}
                </td>
                <td>
                  <button
                  (click)="openModal(proveedor)"
                  class="btn btn-outline-info"
                >
                <img width="20" height="20" src="https://img.icons8.com/ios-glyphs/30/000000/visible--v1.png" alt="visible--v1"/>
                </button>
                  <button
                  (click)="editarProveedor(proveedor.id)"
                  class="btn btn-outline-warning mx-2 "
                >
                <img width="20" height="20" src="https://img.icons8.com/ios/50/edit--v1.png" alt="edit--v1"/>
                </button>

                <button
                  *ngIf="proveedor.eliminado"
                  class="btn btn-outline-primary "
                  (click)="eliminarProveedor(proveedor.id)"
                >
                <img width="20" height="20" src="https://img.icons8.com/windows/32/trash-restore.png" alt="trash-restore"/>
                </button>
                <button
                  *ngIf="!proveedor.eliminado"
                  class="btn btn-outline-danger"
                  (click)="eliminarProveedor(proveedor.id)"
                >
                <img width="20" height="20" src="https://img.icons8.com/material-rounded/24/filled-trash.png" alt="filled-trash"/>
                </button>
                </td>
              </tr>
            </ng-container>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
